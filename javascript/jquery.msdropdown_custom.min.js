var msBeautify=msBeautify||{};!function($){function dd(element,settings){var settings=$.extend(!0,{byJson:{data:null,selectedIndex:0,name:null,size:0,multiple:!1,width:250},mainCSS:"dd",height:120,visibleRows:7,rowHeight:0,showIcon:!0,zIndex:9999,useSprite:!1,animStyle:"slideDown",event:"click",openDirection:"auto",jsonTitle:!0,style:"",disabledOpacity:.7,disabledOptionEvents:!0,childWidth:0,enableCheckbox:!1,checkboxNameSuffix:"_mscheck",append:"",prepend:"",reverseMode:!0,roundedCorner:!0,enableAutoFilter:!0,on:{create:null,open:null,close:null,add:null,remove:null,change:null,blur:null,click:null,dblclick:null,mousemove:null,mouseover:null,mouseout:null,focus:null,mousedown:null,mouseup:null}},settings),$this=this,holderId={postElementHolder:"_msddHolder",postID:"_msdd",postTitleWrapperID:"_title_wrapper",postTitleID:"_title",postTitleTextID:"_titleText",postChildID:"_child"},css={dd:settings.mainCSS,ddTitle:"ddTitle",arrow:"ddArrow arrowoff",ddChild:"ddChild",ddTitleText:"ddTitleText",disabled:"disabled",enabled:"enabled",ddOutOfVision:"ddOutOfVision",borderTop:"borderTop",noBorderTop:"noBorderTop",selected:"selected",divider:"divider",optgroup:"optgroup",optgroupTitle:"optgroupTitle",description:"description",label:"ddlabel",hover:"hover",disabledAll:"disabledAll"},css_i={li:"_msddli_",borderRadiusTp:"borderRadiusTp",borderRadiusBtm:"borderRadiusBtm",ddChildMore:"border shadow",fnone:"fnone"},isList=!1,isMultiple=!1,isDisabled=!1,cacheElement={},element,orginial={},isOpen=!1,DOWN_ARROW=40,UP_ARROW=38,LEFT_ARROW=37,RIGHT_ARROW=39,ESCAPE=27,ENTER=13,ALPHABETS_START=47,SHIFT=16,CONTROL=17,BACKSPACE=8,DELETE=46,shiftHolded=!1,controlHolded=!1,lastTarget=null,forcedTrigger=!1,oldSelected,isCreated=!1,doc=document,ua=window.navigator.userAgent,isIE=ua.match(/msie/i);settings.reverseMode=settings.reverseMode.toString(),settings.roundedCorner=settings.roundedCorner.toString();var isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},msieversion=function(){var e=ua.indexOf("MSIE");return e>0?parseInt(ua.substring(e+5,ua.indexOf(".",e))):0},checkDataSetting=function(){settings.mainCSS=$("#"+element).data("maincss")||settings.mainCSS,settings.visibleRows=$("#"+element).data("visiblerows")||settings.visibleRows,0==$("#"+element).data("showicon")&&(settings.showIcon=$("#"+element).data("showicon")),settings.useSprite=$("#"+element).data("usesprite")||settings.useSprite,settings.animStyle=$("#"+element).data("animstyle")||settings.animStyle,settings.event=$("#"+element).data("event")||settings.event,settings.openDirection=$("#"+element).data("opendirection")||settings.openDirection,settings.jsonTitle=$("#"+element).data("jsontitle")||settings.jsonTitle,settings.disabledOpacity=$("#"+element).data("disabledopacity")||settings.disabledOpacity,settings.childWidth=$("#"+element).data("childwidth")||settings.childWidth,settings.enableCheckbox=$("#"+element).data("enablecheckbox")||settings.enableCheckbox,settings.checkboxNameSuffix=$("#"+element).data("checkboxnamesuffix")||settings.checkboxNameSuffix,settings.append=$("#"+element).data("append")||settings.append,settings.prepend=$("#"+element).data("prepend")||settings.prepend,settings.reverseMode=$("#"+element).data("reversemode")||settings.reverseMode,settings.roundedCorner=$("#"+element).data("roundedcorner")||settings.roundedCorner,settings.enableAutoFilter=$("#"+element).data("enableautofilter")||settings.enableAutoFilter,settings.reverseMode=settings.reverseMode.toString(),settings.roundedCorner=settings.roundedCorner.toString(),settings.enableAutoFilter=settings.enableAutoFilter.toString()},getElement=function(e){return void 0===cacheElement[e]&&(cacheElement[e]=doc.getElementById(e)),cacheElement[e]},getIndex=function(e){var t=getPostID("postChildID");return $("#"+t+" li."+css_i.li).index(e)},createByJson=function(){if(settings.byJson.data){var validData=["description","image","title"];try{element.id||(element.id="dropdown"+msBeautify.counter),settings.byJson.data=eval(settings.byJson.data);var id="msdropdown"+msBeautify.counter++,obj={};obj.id=id,obj.name=settings.byJson.name||element.id,settings.byJson.size>0&&(obj.size=settings.byJson.size),obj.multiple=settings.byJson.multiple;for(var oSelect=createElement("select",obj),i=0;i<settings.byJson.data.length;i++){var current=settings.byJson.data[i],opt=new Option(current.text,current.value);for(var p in current)if("text"!=p.toLowerCase()){var key=-1!=$.inArray(p.toLowerCase(),validData)?"data-":"";opt.setAttribute(key+p,current[p])}oSelect.options[i]=opt}getElement(element.id).appendChild(oSelect),oSelect.selectedIndex=settings.byJson.selectedIndex,$(oSelect).css({width:settings.byJson.width+"px"}),element=oSelect}catch(e){throw"There is an error in json data."}}},init=function(){createByJson(),element.id||(element.id="msdrpdd"+msBeautify.counter++),element=element.id,$this.element=element,checkDataSetting(),isDisabled=getElement(element).disabled,"true"===settings.enableCheckbox.toString()&&(getElement(element).multiple=!0,settings.enableCheckbox=!0),(isList=getElement(element).size>1||1==getElement(element).multiple)&&(isMultiple=getElement(element).multiple),mergeAllProp(),createLayout(),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"));var e=getPostID("postChildID");oldSelected=$("#"+e+" li."+css.selected),"true"===settings.reverseMode&&$("#"+element).on("change",function(){setValue(this.selectedIndex)}),getElement(element).refresh=function(e){$("#"+element).msDropdown().data("dd").refresh()}},getPostID=function(e){return element+holderId[e]},getInternalStyle=function(e){return void 0===e.style?"":e.style.cssText},parseOption=function(opt){var imagePath="",title="",description="",value=-1,text="",className="",imagecss="",index;if(void 0!==opt){var attrTitle=opt.title||"";if(""!=attrTitle){var reg=/^\{.*\}$/,isJson=reg.test(attrTitle);if(isJson&&settings.jsonTitle)var obj=eval("["+attrTitle+"]");title=isJson&&settings.jsonTitle?obj[0].title:title,description=isJson&&settings.jsonTitle?obj[0].description:description,imagePath=isJson&&settings.jsonTitle?obj[0].image:attrTitle,imagecss=isJson&&settings.jsonTitle?obj[0].imagecss:imagecss,index=opt.index}text=opt.text||"",value=opt.value||"",className=opt.className||"",title=$(opt).prop("data-title")||$(opt).data("title")||title||"",description=$(opt).prop("data-description")||$(opt).data("description")||description||"",imagePath=$(opt).prop("data-image")||$(opt).data("image")||imagePath||"",imagecss=$(opt).prop("data-imagecss")||$(opt).data("imagecss")||imagecss||"",index=$(opt).index()}var o={image:imagePath,title:title,description:description,value:value,text:text,className:className,imagecss:imagecss,index:index};return o},createElement=function(e,t,s){var i=doc.createElement(e);if(t)for(var n in t)switch(n){case"style":i.style.cssText=t[n];break;default:i[n]=t[n]}return s&&(i.innerHTML=s),i},hideOriginal=function(){var e=getPostID("postElementHolder");if(0==$("#"+e).length){var t={style:"height: 0px;overflow: hidden;position: absolute;",className:css.ddOutOfVision};t.id=e;var s=createElement("div",t);$("#"+element).after(s),$("#"+element).appendTo($("#"+e))}else $("#"+e).css({height:0,overflow:"hidden",position:"absolute"});getElement(element).tabIndex=-1},createWrapper=function(){var e="true"==settings.roundedCorner?" borderRadius":"",t={className:css.dd+" ddcommon"+e},s=getInternalStyle(getElement(element)),i=$("#"+element).outerWidth();return t.style="width: "+i+"px;",s.length>0&&(t.style=t.style+""+s),t.id=getPostID("postID"),t.tabIndex=getElement(element).tabIndex,createElement("div",t)},createTitle=function(){var e;e=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex]:{value:"",text:""};var t="",s="",i=$("#"+element).data("usesprite");i&&(settings.useSprite=i),0!=settings.useSprite&&(t=" "+settings.useSprite,s=" "+e.className);var n="true"==settings.roundedCorner?" "+css_i.borderRadiusTp:"",l="true"==settings.roundedCorner?" "+css_i.borderRadiusBtm:"",o=getPostID("postTitleWrapperID"),a=createElement("div",{className:css.ddTitle+t+n+l,id:o}),d=createElement("span",{className:css.divider}),r=createElement("span",{className:css.arrow}),c=getPostID("postTitleID"),p=createElement("span",{className:css.ddTitleText+s,id:c}),u=parseOption(e),m=u.image,g=u.text||"";if(""!=m&&settings.showIcon){var h=createElement("img");h.src=m,""!=u.imagecss&&(h.className=u.imagecss+" ")}var f=createElement("span",{className:css.label},g);a.appendChild(d),a.appendChild(r),h&&p.appendChild(h),p.appendChild(f),a.appendChild(p);var v=createElement("span",{className:css.description},u.description);return p.appendChild(v),a},createFilterBox=function(){var e=getPostID("postTitleTextID"),t="true"==settings.roundedCorner?"borderRadius":"";return createElement("input",{id:e,type:"text",value:"",autocomplete:"off",className:"text shadow "+t,style:"display: none"})},createChild=function(e){var t={},s=getInternalStyle(e);s.length>0&&(t.style=s);var i=e.disabled?css.disabled:css.enabled;i=(i=e.selected?i+" "+css.selected:i)+" "+css_i.li,t.className=i,0!=settings.useSprite&&(t.className=i+" "+e.className);var n=createElement("li",t),l=parseOption(e);""!=l.title&&(n.title=l.title);var o=l.image;if(""!=o&&settings.showIcon){var a=createElement("img");a.src=o,""!=l.imagecss&&(a.className=l.imagecss+" ")}if(""!=l.description)var d=createElement("span",{className:css.description},l.description);var r=e.text||"",c=createElement("span",{className:css.label},r);if(!0===settings.enableCheckbox){var p=createElement("input",{type:"checkbox",name:element+settings.checkboxNameSuffix+"[]",value:e.value||"",className:"checkbox"});n.appendChild(p),!0===settings.enableCheckbox&&(p.checked=!!e.selected)}a&&n.appendChild(a),n.appendChild(c),d?n.appendChild(d):a&&(a.className=a.className+css_i.fnone);var u=createElement("div",{className:"clear"});return n.appendChild(u),n},createChildren=function(){var e=getPostID("postChildID"),t={className:css.ddChild+" ddchild_ "+css_i.ddChildMore,id:e};t.style=0==isList?"z-index: "+settings.zIndex:"z-index:1";var s=$("#"+element).data("childwidth")||settings.childWidth;s&&(t.style=(t.style||"")+";width:"+s);var i=createElement("div",t),n=createElement("ul");0!=settings.useSprite&&(n.className=settings.useSprite);for(var l=getElement(element).children,o=0;o<l.length;o++){var a,d=l[o];if("optgroup"==d.nodeName.toLowerCase()){a=createElement("li",{className:css.optgroup});var r=createElement("span",{className:css.optgroupTitle},d.label);a.appendChild(r);for(var c=d.children,p=createElement("ul"),u=0;u<c.length;u++){var m=createChild(c[u]);p.appendChild(m)}a.appendChild(p)}else a=createChild(d);n.appendChild(a)}return i.appendChild(n),i},childHeight=function(e){var t=getPostID("postChildID");if(e)return-1==e?$("#"+t).css({height:"auto",overflow:"auto"}):$("#"+t).css("height",e+"px"),!1;var s,i=getElement(element).options.length;if(i>settings.visibleRows||settings.visibleRows){var n=$("#"+t+" li:first"),l=parseInt(n.css("padding-bottom"))+parseInt(n.css("padding-top"));0===settings.rowHeight&&($("#"+t).css({visibility:"hidden",display:"block"}),settings.rowHeight=Math.ceil(n.height()),$("#"+t).css({visibility:"visible"}),isList&&!0!==settings.enableCheckbox||$("#"+t).css({display:"none"})),s=(settings.rowHeight+l)*Math.min(settings.visibleRows,i)+3}else isList&&(s=$("#"+element).height());return s},applyChildEvents=function(){var e=getPostID("postChildID");$("#"+e).on("click",function(e){if(!0===isDisabled)return!1;e.preventDefault(),e.stopPropagation(),isList&&bind_on_events()}),$("#"+e+" li."+css.enabled).on("click",function(e){"input"!==e.target.nodeName.toLowerCase()&&close(this)}),$("#"+e+" li."+css.enabled).on("mousedown",function(t){if(!0===isDisabled)return!1;if(oldSelected=$("#"+e+" li."+css.selected),lastTarget=this,t.preventDefault(),t.stopPropagation(),!0===settings.enableCheckbox&&"input"===t.target.nodeName.toLowerCase()&&(controlHolded=!0),!0===isList)if(isMultiple)if(!0===shiftHolded){$(this).addClass(css.selected);var s=$("#"+e+" li."+css.selected),i=getIndex(this);if(s.length>1){var n=$("#"+e+" li."+css_i.li),l=getIndex(s[0]),o=getIndex(s[1]);i>o&&(l=i,o+=1);for(var a=Math.min(l,o);a<=Math.max(l,o);a++){var d=n[a];$(d).hasClass(css.enabled)&&$(d).addClass(css.selected)}}}else if(!0===controlHolded){if($(this).toggleClass(css.selected),!0===settings.enableCheckbox){var r=this.childNodes[0];r.checked=!r.checked}}else $("#"+e+" li."+css.selected).removeClass(css.selected),$("#"+e+" input:checkbox").prop("checked",!1),$(this).addClass(css.selected),!0===settings.enableCheckbox&&(this.childNodes[0].checked=!0);else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected);else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected)}),$("#"+e+" li."+css.enabled).on("mouseenter",function(e){if(!0===isDisabled)return!1;e.preventDefault(),e.stopPropagation(),null!=lastTarget&&isMultiple&&($(this).addClass(css.selected),!0===settings.enableCheckbox&&(this.childNodes[0].checked=!0))}),$("#"+e+" li."+css.enabled).on("mouseover",function(e){if(!0===isDisabled)return!1;$(this).addClass(css.hover)}),$("#"+e+" li."+css.enabled).on("mouseout",function(t){if(!0===isDisabled)return!1;$("#"+e+" li."+css.hover).removeClass(css.hover)}),$("#"+e+" li."+css.enabled).on("mouseup",function(t){if(!0===isDisabled)return!1;t.preventDefault(),t.stopPropagation(),!0===settings.enableCheckbox&&(controlHolded=!1);var s=$("#"+e+" li."+css.selected).length;forcedTrigger=oldSelected.length!=s||0==s,fireAfterItemClicked(),unbind_on_events(),bind_on_events(),lastTarget=null}),0==settings.disabledOptionEvents&&($("#"+e+" li."+css_i.li).on("click",function(e){if(!0===isDisabled)return!1;fireOptionEventIfExist(this,"click")}),$("#"+e+" li."+css_i.li).on("mouseenter",function(e){if(!0===isDisabled)return!1;fireOptionEventIfExist(this,"mouseenter")}),$("#"+e+" li."+css_i.li).on("mouseover",function(e){if(!0===isDisabled)return!1;fireOptionEventIfExist(this,"mouseover")}),$("#"+e+" li."+css_i.li).on("mouseout",function(e){if(!0===isDisabled)return!1;fireOptionEventIfExist(this,"mouseout")}),$("#"+e+" li."+css_i.li).on("mousedown",function(e){if(!0===isDisabled)return!1;fireOptionEventIfExist(this,"mousedown")}),$("#"+e+" li."+css_i.li).on("mouseup",function(e){if(!0===isDisabled)return!1;fireOptionEventIfExist(this,"mouseup")}))},removeChildEvents=function(){var e=getPostID("postChildID");$("#"+e).off("click"),$("#"+e+" li."+css.enabled).off("mouseenter"),$("#"+e+" li."+css.enabled).off("click"),$("#"+e+" li."+css.enabled).off("mouseover"),$("#"+e+" li."+css.enabled).off("mouseout"),$("#"+e+" li."+css.enabled).off("mousedown"),$("#"+e+" li."+css.enabled).off("mouseup")},triggerBypassingHandler=function(e,t,s){$("#"+e).off(t,s),$("#"+e).trigger(t),$("#"+e).on(t,s)},applyEvents=function(){var e=getPostID("postID"),t=getPostID("postTitleTextID");getPostID("postChildID");$("#"+e).on(settings.event,function(e){if(!0===isDisabled)return!1;fireEventIfExist(settings.event),e.preventDefault(),e.stopPropagation(),open(e)}),$("#"+e).on("keydown",function(e){var t=e.which;!isOpen&&(t==ENTER||t==UP_ARROW||t==DOWN_ARROW||t==LEFT_ARROW||t==RIGHT_ARROW||t>=ALPHABETS_START&&!isList)&&(open(e),t>=ALPHABETS_START?showFilterBox():(e.preventDefault(),e.stopImmediatePropagation()))}),$("#"+e).on("focus",wrapperFocusHandler),$("#"+e).on("blur",wrapperBlurHandler),$("#"+t).on("blur",function(t){triggerBypassingHandler(e,"focus",wrapperFocusHandler)}),applyChildEvents(),$("#"+e).on("dblclick",on_dblclick),$("#"+e).on("mousemove",on_mousemove),$("#"+e).on("mouseenter",on_mouseover),$("#"+e).on("mouseleave",on_mouseout),$("#"+e).on("mousedown",on_mousedown),$("#"+e).on("mouseup",on_mouseup)},wrapperFocusHandler=function(e){fireEventIfExist("focus")},wrapperBlurHandler=function(e){fireEventIfExist("blur")},fixedForList=function(){var e=getPostID("postID"),t=getPostID("postChildID");if(!0===isList&&!1===settings.enableCheckbox)$("#"+e+" ."+css.ddTitle).hide(),$("#"+t).css({display:"block",position:"relative"});else{!1===settings.enableCheckbox&&(isMultiple=!1),$("#"+e+" ."+css.ddTitle).show(),$("#"+t).css({display:"none",position:"absolute"});var s=$("#"+t+" li."+css.selected)[0];$("#"+t+" li."+css.selected).removeClass(css.selected);var i=getIndex($(s).addClass(css.selected));setValue(i)}childHeight(childHeight())},fixedForDisabled=function(){var e=getPostID("postID");1==isDisabled&&settings.disabledOpacity;!0===isDisabled?$("#"+e).addClass(css.disabledAll):$("#"+e).removeClass(css.disabledAll)},fixedSomeUI=function(){var e=getPostID("postTitleTextID");"true"==settings.enableAutoFilter&&$("#"+e).on("keyup",applyFilters),fixedForList(),fixedForDisabled()},createLayout=function(){var e=createWrapper(),t=createTitle();e.appendChild(t);var s=createFilterBox();e.appendChild(s);var i=createChildren();e.appendChild(i),$("#"+element).after(e),hideOriginal(),fixedSomeUI(),applyEvents();var n=getPostID("postChildID");""!=settings.append&&$("#"+n).append(settings.append),""!=settings.prepend&&$("#"+n).prepend(settings.prepend),"function"==typeof settings.on.create&&settings.on.create.apply($this,arguments)},selectUI_LI=function(e){function t(e){$($("#"+s+" li."+css_i.li)[e]).addClass(css.selected),!0===settings.enableCheckbox&&$($("#"+s+" li."+css_i.li)[e]).find("input.checkbox").prop("checked","checked")}var s=getPostID("postChildID");if($("#"+s+" li."+css_i.li).removeClass(css.selected),!0===settings.enableCheckbox&&$("#"+s+" li."+css_i.li+" input.checkbox").prop("checked",!1),!0===isArray(e))for(var i=0;i<e.length;i++)t(e[i]);else t(e)},selectMutipleOptions=function(e,t){for(var s=getPostID("postChildID"),i=e||$("#"+s+" li."+css.selected),n=0;n<i.length;n++){var l=!0===t?i[n]:getIndex(i[n]);getElement(element).options[l].selected="selected"}setValue(i)},fireAfterItemClicked=function(){var e=getPostID("postChildID"),t=$("#"+e+" li."+css.selected);(isMultiple&&(shiftHolded||controlHolded)||forcedTrigger)&&(getElement(element).selectedIndex=-1);var s;if(0==t.length?s=-1:t.length>1?selectMutipleOptions(t):s=getIndex($("#"+e+" li."+css.selected)),(getElement(element).selectedIndex!=s||forcedTrigger)&&t.length<=1){forcedTrigger=!1;has_handler("change");if(getElement(element).selectedIndex=s,setValue(s),"function"==typeof settings.on.change){var i=getDataAndUI();settings.on.change(i.data,i.ui)}$("#"+element).trigger("change")}},setValue=function(e,t){if(void 0!==e){var s,i,n;if(-1==e)s=-1,i="",n="",updateTitleUI(-1);else if("object"!=typeof e){var l=getElement(element).options[e];getElement(element).selectedIndex=e,s=e,i=parseOption(l),n=e>=0?getElement(element).options[e].text:"",updateTitleUI(void 0,i),i=i.value}else s=t&&t.index||getElement(element).selectedIndex,i=t&&t.value||getElement(element).value,n=t&&t.text||getElement(element).options[getElement(element).selectedIndex].text||"",updateTitleUI(s);updateProp("selectedIndex",s),updateProp("value",i),updateProp("selectedText",n),updateProp("children",getElement(element).children),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"))}},has_handler=function(e){var t={byElement:!1,byJQuery:!1,hasEvent:!1},s=$("#"+element);try{null!==s.prop("on"+e)&&(t.hasEvent=!0,t.byElement=!0)}catch(e){}var i;return(i="function"==typeof $._data?$._data(s[0],"events"):s.data("events"))&&i[e]&&(t.hasEvent=!0,t.byJQuery=!0),t},bind_on_events=function(){unbind_on_events(),$("body").on("click",close),$(document).on("keydown",on_keydown),$(document).on("keyup",on_keyup)},unbind_on_events=function(){$("body").off("click",close),$(document).off("keydown",on_keydown),$(document).off("keyup",on_keyup)},applyFilters=function(e){if(e.keyCode<ALPHABETS_START&&e.keyCode!=BACKSPACE&&e.keyCode!=DELETE)return!1;var t=getPostID("postChildID"),s=getPostID("postTitleTextID"),i=getElement(s).value;if(0==i.length)$("#"+t+" li:hidden").show(),childHeight(childHeight());else{$("#"+t+" li").hide();var n=$("#"+t+" li:Contains('"+i+"')").show();$("#"+t+" li:visible").length<=settings.visibleRows&&childHeight(-1),(n.length>0&&!isList||!isMultiple)&&($("#"+t+" ."+css.selected).removeClass(css.selected),$(n[0]).addClass(css.selected))}isList||adjustOpen()},showFilterBox=function(){if("true"==settings.enableAutoFilter){var e=getPostID("postID"),t=getPostID("postTitleTextID");$("#"+t+":hidden").length>0&&0==controlHolded&&($("#"+t+":hidden").show().val(""),triggerBypassingHandler(e,"blur",wrapperBlurHandler),getElement(t).focus())}},hideFilterBox=function(){var e=getPostID("postTitleTextID");$("#"+e+":visible").length>0&&($("#"+e+":visible").hide(),getElement(e).blur())},on_keydown=function(e){getPostID("postTitleTextID");var t=getPostID("postChildID");switch(e.keyCode){case DOWN_ARROW:case RIGHT_ARROW:e.preventDefault(),e.stopPropagation(),next();break;case UP_ARROW:case LEFT_ARROW:e.preventDefault(),e.stopPropagation(),previous();break;case ESCAPE:case ENTER:e.preventDefault(),e.stopPropagation(),close();var s=$("#"+t+" li."+css.selected).length;forcedTrigger=oldSelected.length!=s||0==s,fireAfterItemClicked(),unbind_on_events(),lastTarget=null;break;case SHIFT:shiftHolded=!0;break;case CONTROL:controlHolded=!0;break;default:e.keyCode>=ALPHABETS_START&&!1===isList&&showFilterBox()}if(!0===isDisabled)return!1;fireEventIfExist("keydown")},on_keyup=function(e){switch(e.keyCode){case SHIFT:shiftHolded=!1;break;case CONTROL:controlHolded=!1}if(!0===isDisabled)return!1;fireEventIfExist("keyup")},on_dblclick=function(e){if(!0===isDisabled)return!1;fireEventIfExist("dblclick")},on_mousemove=function(e){if(!0===isDisabled)return!1;fireEventIfExist("mousemove")},on_mouseover=function(e){if(!0===isDisabled)return!1;e.preventDefault(),fireEventIfExist("mouseover")},on_mouseout=function(e){if(!0===isDisabled)return!1;e.preventDefault(),fireEventIfExist("mouseout")},on_mousedown=function(e){if(!0===isDisabled)return!1;fireEventIfExist("mousedown")},on_mouseup=function(e){if(!0===isDisabled)return!1;fireEventIfExist("mouseup")},option_has_handler=function(e,t){var s={byElement:!1,byJQuery:!1,hasEvent:!1};void 0!=$(e).prop("on"+t)&&(s.hasEvent=!0,s.byElement=!0);var i=$(e).data("events");return i&&i[t]&&(s.hasEvent=!0,s.byJQuery=!0),s},fireOptionEventIfExist=function(e,t){if(0==settings.disabledOptionEvents){var s=getElement(element).options[getIndex(e)];if(!0===option_has_handler(s,t).hasEvent){if(!0===option_has_handler(s,t).byElement&&s["on"+t](),!0===option_has_handler(s,t).byJQuery)switch(t){case"keydown":case"keyup":break;default:$(s).trigger(t)}return!1}}},fireEventIfExist=function(e){if("function"==typeof settings.on[e]&&settings.on[e].apply(this,arguments),!0===has_handler(e).hasEvent){if(!0===has_handler(e).byElement)getElement(element)["on"+e]();else if(!0===has_handler(e).byJQuery)switch(e){case"keydown":case"keyup":break;default:$("#"+element).triggerHandler(e)}return!1}},scrollToIfNeeded=function(e){var t=getPostID("postChildID");if((e=void 0!==e?e:$("#"+t+" li."+css.selected)).length>0){var s=parseInt($(e).position().top),i=parseInt($("#"+t).height());if(s>i){var n=s+$("#"+t).scrollTop()-i/2;$("#"+t).animate({scrollTop:n},500)}}},next=function(){function e(t){return t+=1,t>s.length?t:!0===$(s[t]).hasClass(css.enabled)?t:t=e(t)}var t=getPostID("postChildID"),s=$("#"+t+" li:visible."+css_i.li),i=$("#"+t+" li:visible."+css.selected);i=0==i.length?s[0]:i;var n=$("#"+t+" li:visible."+css_i.li).index(i);n<s.length-1&&((n=e(n))<s.length&&(shiftHolded&&isList&&isMultiple||$("#"+t+" ."+css.selected).removeClass(css.selected),$(s[n]).addClass(css.selected),updateTitleUI(n),1==isList&&fireAfterItemClicked(),scrollToIfNeeded($(s[n]))),isList||adjustOpen())},previous=function(){function e(t){return t-=1,t<0?t:!0===$(i[t]).hasClass(css.enabled)?t:t=e(t)}var t=getPostID("postChildID"),s=$("#"+t+" li:visible."+css.selected),i=$("#"+t+" li:visible."+css_i.li),n=$("#"+t+" li:visible."+css_i.li).index(s[0]);if(n>=0){if((n=e(n))>=0&&(shiftHolded&&isList&&isMultiple||$("#"+t+" ."+css.selected).removeClass(css.selected),$(i[n]).addClass(css.selected),updateTitleUI(n),1==isList&&fireAfterItemClicked(),parseInt($(i[n]).position().top+$(i[n]).height())<=0)){var l=$("#"+t).scrollTop()-$("#"+t).height()-$(i[n]).height();$("#"+t).animate({scrollTop:l},500)}isList||adjustOpen()}},adjustOpen=function(){var e=getPostID("postID"),t=getPostID("postTitleWrapperID"),s=getPostID("postChildID"),i=$("#"+e).offset(),n=$("#"+e).height(),l=$(window).height(),o=$(window).scrollTop(),a=$("#"+s).height(),d=$("#"+e).height(),r=settings.openDirection.toLowerCase();(l+o<Math.floor(a+n+i.top)||"alwaysup"==r)&&"alwaysdown"!=r?(d=a,$("#"+s).css({top:"-"+d+"px",display:"block",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&($("#"+e).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm"),$("#"+t).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm")),(d=$("#"+s).offset().top)<-10&&($("#"+s).css({top:parseInt($("#"+s).css("top"))-d+20+o+"px",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&($("#"+e).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius"),$("#"+t).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius")))):($("#"+s).css({top:d+"px",zIndex:settings.zIndex}),"true"==settings.roundedCorner&&($("#"+e).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp"),$("#"+t).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp"))),isIE&&msieversion()<=7&&($("div.ddcommon").css("zIndex",settings.zIndex-10),$("#"+e).css("zIndex",settings.zIndex+5))},open=function(e){if(!0===isDisabled)return!1;getPostID("postID");var t=getPostID("postChildID");if(isOpen)"mouseover"!==settings.event&&close();else{isOpen=!0,""!=msBeautify.oldDiv&&$("#"+msBeautify.oldDiv).css({display:"none"}),msBeautify.oldDiv=t,$("#"+t+" li:hidden").show(),adjustOpen();var s=settings.animStyle;if(""==s||"none"==s){if($("#"+t).css({display:"block"}),scrollToIfNeeded(),"function"==typeof settings.on.open){var i=getDataAndUI();settings.on.open(i.data,i.ui)}}else $("#"+t)[s]("fast",function(){if(scrollToIfNeeded(),"function"==typeof settings.on.open){var e=getDataAndUI();settings.on.open(e.data,e.ui)}});bind_on_events()}},close=function(e){isOpen=!1;var t=getPostID("postID"),s=getPostID("postTitleWrapperID"),i=getPostID("postChildID");if(!1!==isList&&!0!==settings.enableCheckbox||($("#"+i).css({display:"none"}),"true"==settings.roundedCorner&&($("#"+t).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius"),$("#"+s).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius"))),unbind_on_events(),"function"==typeof settings.on.close){var n=getDataAndUI();settings.on.close(n.data,n.ui)}hideFilterBox(),childHeight(childHeight()),$("#"+i).css({zIndex:1}),updateTitleUI(getElement(element).selectedIndex)},mergeAllProp=function(){try{orginial=$.extend(!0,{},getElement(element));for(var e in orginial)"function"!=typeof orginial[e]&&($this[e]=orginial[e])}catch(e){}$this.selectedText=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex].text:"",$this.version=msBeautify.version.msDropdown,$this.author=msBeautify.author},getDataAndUIByOption=function(e){if(null!=e&&void 0!==e){var t=getPostID("postChildID");return{data:parseOption(e),ui:$("#"+t+" li."+css_i.li+":eq("+e.index+")"),option:e,index:e.index}}return null},getDataAndUI=function(){var e,t,s,i,n=getPostID("postChildID"),l=getElement(element);if(-1==l.selectedIndex)e=null,t=null,s=null,i=-1;else if((t=$("#"+n+" li."+css.selected)).length>1){for(var o=[],a=[],d=0;d<t.length;d++){var r=getIndex(t[d]);o.push(r),a.push(l.options[r])}e=o,s=a,i=o}else s=l.options[l.selectedIndex],e=parseOption(s),i=l.selectedIndex;return{data:e,ui:t,index:i,option:s}},updateTitleUI=function(e,t){var s=getPostID("postTitleID"),i={};if(-1==e)i.text="&nbsp;",i.className="",i.description="",i.image="";else if(void 0!==e){var n=getElement(element).options[e];i=parseOption(n)}else i=t;$("#"+s).find("."+css.label).html(i.text),getElement(s).className=css.ddTitleText+" "+i.className,""!=i.description?$("#"+s).find("."+css.description).html(i.description).show():$("#"+s).find("."+css.description).html("").hide();var l=$("#"+s).find("img");l.length>0&&$(l).remove(),""!=i.image&&settings.showIcon&&(l=createElement("img",{src:i.image}),$("#"+s).prepend(l),""!=i.imagecss&&(l.className=i.imagecss+" "),""==i.description&&(l.className=l.className+css_i.fnone))},updateProp=function(e,t){$this[e]=t},updateUI=function(e,t,s){var i=getPostID("postChildID"),n=!1;switch(e){case"add":var l,o=createChild(t||getElement(element).options[s]);if((l=3==arguments.length?s:$("#"+i+" li."+css_i.li).length-1)<0||!l)$("#"+i+" ul").append(o);else{var a=$("#"+i+" li."+css_i.li)[l];$(a).before(o)}removeChildEvents(),applyChildEvents(),null!=settings.on.add&&settings.on.add.apply(this,arguments);break;case"remove":n=$($("#"+i+" li."+css_i.li)[s]).hasClass(css.selected),$("#"+i+" li."+css_i.li+":eq("+s+")").remove();var d=$("#"+i+" li."+css.enabled);if(1==n&&d.length>0){$(d[0]).addClass(css.selected);var r=$("#"+i+" li."+css_i.li).index(d[0]);setValue(r)}0==d.length&&setValue(-1),$("#"+i+" li."+css_i.li).length<settings.visibleRows&&!isList&&childHeight(-1),null!=settings.on.remove&&settings.on.remove.apply(this,arguments)}};this.act=function(){var e=arguments[0];switch(Array.prototype.shift.call(arguments),e){case"add":$this.add.apply(this,arguments);break;case"remove":$this.remove.apply(this,arguments);break;default:try{getElement(element)[e].apply(getElement(element),arguments)}catch(e){}}},this.add=function(){var e,t,s,i,n,l=arguments[0];"string"==typeof l?(t=e=l,opt=new Option(e,t)):(e=l.text||"",t=l.value||e,s=l.title||"",i=l.image||"",n=l.description||"",opt=new Option(e,t),$(opt).data("description",n),$(opt).data("image",i),$(opt).data("title",s)),arguments[0]=opt,getElement(element).add.apply(getElement(element),arguments),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("add",opt,arguments[1])},this.remove=function(e){getElement(element).remove(e),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("remove",void 0,e)},this.set=function(e,t){if(void 0===e||void 0===t)return!1;e=e.toString();try{updateProp(e,t)}catch(e){}switch(e){case"size":getElement(element)[e]=t,0==t&&(getElement(element).multiple=!1),isList=getElement(element).size>1||1==getElement(element).multiple,fixedForList();break;case"multiple":getElement(element)[e]=t,isList=getElement(element).size>1||1==getElement(element).multiple,isMultiple=getElement(element).multiple,fixedForList(),updateProp(e,t);break;case"disabled":getElement(element)[e]=t,isDisabled=t,fixedForDisabled();break;case"selectedIndex":case"value":"selectedIndex"==e&&!0===isArray(t)?($("#"+element+" option").prop("selected",!1),selectMutipleOptions(t,!0),selectUI_LI(t)):(getElement(element)[e]=t,selectUI_LI(getElement(element).selectedIndex),setValue(getElement(element).selectedIndex));break;case"length":var s=getPostID("postChildID");t<getElement(element).length&&(getElement(element)[e]=t,0==t?($("#"+s+" li."+css_i.li).remove(),setValue(-1)):($("#"+s+" li."+css_i.li+":gt("+(t-1)+")").remove(),0==$("#"+s+" li."+css.selected).length&&$("#"+s+" li."+css.enabled+":eq(0)").addClass(css.selected)),updateProp(e,t),updateProp("children",getElement(element).children));break;case"id":break;default:try{getElement(element)[e]=t,updateProp(e,t)}catch(e){}}},this.get=function(e){return $this[e]||getElement(element)[e]},this.visible=function(e){var t=getPostID("postID");if(!0===e)$("#"+t).show();else{if(!1!==e)return"none"!=$("#"+t).css("display");$("#"+t).hide()}},this.debug=function(e){msBeautify.debug(e)},this.close=function(){close()},this.open=function(){open()},this.showRows=function(e){if(void 0===e||0==e)return!1;settings.visibleRows=e,childHeight(childHeight())},this.visibleRows=this.showRows,this.on=function(e,t){$("#"+element).on(e,t)},this.off=function(e,t){$("#"+element).off(e,t)},this.addMyEvent=this.on,this.getData=function(){return getDataAndUI()},this.namedItem=function(){var e=getElement(element).namedItem.apply(getElement(element),arguments);return getDataAndUIByOption(e)},this.item=function(){var e=getElement(element).item.apply(getElement(element),arguments);return getDataAndUIByOption(e)},this.setIndexByValue=function(e){this.set("value",e)},this.destroy=function(){getPostID("postElementHolder");var e=getPostID("postID");$("#"+e+", #"+e+" *").off(),getElement(element).tabIndex=getElement(e).tabIndex,$("#"+e).remove(),$("#"+element).parent().replaceWith($("#"+element)),$("#"+element).data("dd",null)},this.refresh=function(){setValue(getElement(element).selectedIndex)},init()}msBeautify={version:{msDropdown:"3.5.2"},author:"Marghoob Suleman",counter:20,debug:function(e){!1!==e?$(".ddOutOfVision").css({height:"auto",position:"relative"}):$(".ddOutOfVision").css({height:"0px",position:"absolute"})},oldDiv:"",create:function(e,t,s){var i;switch((s=s||"dropdown").toLowerCase()){case"dropdown":case"select":i=$(e).msDropdown(t).data("dd")}return i}},$.msDropDown={},$.msDropdown={},$.extend(!0,$.msDropDown,msBeautify),$.extend(!0,$.msDropdown,msBeautify),void 0===$.fn.prop&&($.fn.prop=$.fn.attr),void 0===$.fn.on&&($.fn.on=$.fn.bind,$.fn.off=$.fn.unbind),"function"==typeof $.expr.createPseudo?$.expr[":"].Contains=$.expr.createPseudo(function(e){return function(t){return $(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}}):$.expr[":"].Contains=function(e,t,s){return $(e).text().toUpperCase().indexOf(s[3].toUpperCase())>=0},$.fn.extend({msDropDown:function(e){return this.each(function(){if(!$(this).data("dd")){var t=new dd(this,e);$(this).data("dd",t)}})}}),$.fn.msDropdown=$.fn.msDropDown}(jQuery);